import click


@click.group(invoke_without_command=True)
@click.pass_context
def cli(ctx):
    if ctx.invoked_subcommand not in ["menace", "plainte"]:
        print("Option non reconnue ü§∑")


@cli.command()
@click.argument("previous_claims", required=True, default=None, type=str, nargs=-1)
def avertissement(previous_claims):
    message = f"""Bonjour,
 
Je n'ai *jamais* demand√© √† recevoir votre newsletter ; j'ai m√™me d√©j√† demand√© √† ne *plus* la recevoir {len(previous_claims) - 1} fois (les {n_clics}). Cet action qui vous oblige l√©galement √† me sortir de vos mailings. 
Vous n'avez manifestement pris aucune action pour vous mettre en confirmit√© avec mes souhaits et avec le RGPD (puisque je re√ßois toujours vos mails) : je vous indique donc que je saisirai la CNIL au prochain mail commercial.
 
Par ailleurs, je profite de ce mail pour vous demander :
- de supprimer toutes mes informations de contact de vos bases de donn√©es
- de me communiquer la liste des tiers √† qui vous auriez pu communiquer mes coordonn√©es
- exiger de ces tiers qu'ils suppriment √©galement mes coordonn√©es de leurs bases de donn√©es
- de me tenir au courant de toutes ces proc√©dures
Je vous rappelle que vous b√©n√©ficiez d'un d√©lai d'1 mois pour effectuer ces actions (https://www.cnil.fr/fr/le-droit-leffacement-supprimer-vos-donnees-en-ligne).
 
Cordialement.
Fran√ßois Weber"""
    print(message)


@cli.command()
@click.argument("entity", type=str)
@click.argument("previous_claims", type=str, nargs=-1)
def plainte(entity, previous_claims):
    message_cnil = f"""Bonjour
J'ai re√ßu plusieurs mails commerciaux non sollicit√©s de la part de {entity} aux dates suivantes : {', '.join(previous_claims)}. J'ai syst√©matiquement suivi la proc√©dure de d√©sinscription et ai obtenu validation √† chaque fois. 
Ces sollicitations continuent malgr√© ces demandes et je souhaite donc porter plainte aupr√®s de la CNIL contre {entity} pour non respect de mon consentement (et accessoirement absence de demande de consentement).
Ces pratiques, certes "mineures", doivent √™tre d√©nonc√©es et punies pour √©viter que des lois comme le RGPD tombent aux oubliettes, fautes de r√©action de la part des consommateurs.

Bien cordialement.
Fran√ßois Weber
    """
    print(message_cnil)


if __name__ == "__main__":
    cli()
